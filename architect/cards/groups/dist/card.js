!function(t){var e={};function s(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=0)}([function(t,e,s){s(1),t.exports=s(2)},function(t,e,s){"use strict";s.r(e);function o(t,e,s,o,n,i,r,a){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),o&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=l):n&&(l=a?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}var n=o({props:{groupName:{type:String,required:!0},sessionId:{type:Number,required:!0}},data:function(){return{loaded:!1,session:{},showBookings:!1,groupSessionId:0}},mounted:function(){var t=this;Architect.$on("modal-close",(function(e){"inner-member-list"===e.id&&(t.showBookings=!1)})),Architect.request().get("/external/groups/session/".concat(this.sessionId)).then((function(e){t.session=e.data,t.loaded=!0}))},methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Do MMMM YYYY";return moment(t).format(e)},viewMemberList:function(t,e){0!==e&&(this.groupSessionId=t,this.showBookings=!0)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",[s("div",[s("h2",{staticClass:"text-xl font-semibold text-center mb-2"},[t._v("\n            "+t._s(t.groupName)+", "+t._s(t.session.day.day)+", "+t._s(t.session.human_start_time)+" - "+t._s(t.session.human_end_time)+"\n        ")]),t._v(" "),s("table",{staticClass:"w-full"},[t._m(0),t._v(" "),s("tbody",t._l(t.session.group_sessions,(function(e){return s("tr",{staticClass:"border-b-2 border-blue-500",class:"past"===e.type?"bg-red-500":"future"===e.type?"bg-green-500":""},[s("td",{staticClass:"p-2 border-r border-blue-500"},[t._v(t._s(t.formatDate(e.date)))]),t._v(" "),s("td",{staticClass:"p-2 text-right",on:{click:function(s){return t.viewMemberList(e.id,e.bookings_count)}}},[t._v("\n                    "+t._s(e.bookings_count)+"/"+t._s(t.session.capacity)+"\n                ")])])})),0)])]),t._v(" "),t.showBookings?s("portal",{attrs:{to:"secondary-modal"}},[s("modal",{attrs:{title:"Member List",id:"inner-member-list"}},[s("div",{staticClass:"w-full bg-gray-100 p-2"},[s("div",{staticClass:"absolute top-0 right-0 p-1 leading-none text-xl cursor-pointer",on:{click:function(e){t.showBookings=!1}}},[s("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1),t._v(" "),s("p",[s("a",{attrs:{href:"/admin/api/external/groups/printBookings/"+t.groupSessionId,target:"_blank"}},[t._v("\n                        Printer Friendly List\n                    ")])]),t._v(" "),s("groups-member-list",{attrs:{"group-session-id":t.groupSessionId}})],1)])],1):t._e()],1):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"bg-blue-500 text-white font-semibold border-b-2 border-white"},[e("th",{staticClass:"text-left w-10/12 p-2 border-r border-white"},[this._v("Date")]),this._v(" "),e("th",{staticClass:"text-left p-2"},[this._v("Members")])])])}],!1,null,null,null).exports,i=o({components:{SessionHistory:n},props:{data:Object|Array,labels:Object|Array},data:function(){return{groups:[],viewedSession:null,viewedName:null,showMemberModal:!1,showSessionDetail:!1,sessionId:null}},mounted:function(){var t=this;Architect.$on("modal-close",(function(e){"member-list"===e.id&&(t.showMemberModal=!1),"session-history"===e.id&&(t.showSessionDetail=!1)})),Architect.request().get("/external/groups/list").then((function(e){t.groups=e.data,t.groups.map((function(e){var s={};e.group_sessions.forEach((function(e){Object.keys(s).includes(e.date)||t.$set(s,e.date,[]),s[e.date].push(e)})),Object.keys(s).forEach((function(t){s[t]=s[t].sort((function(t,e){return parseInt(t.session.start_at.split(":")[0])-parseInt(e.session.start_at.split(":")[0])}))})),e.processedGroups=s}))}))},methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Do MMMM YYYY";return moment(t).format(e)},viewBookings:function(t,e){0!==t.members_count&&(this.viewedName=e,this.viewedSession=t,this.showMemberModal=!0)},viewSessionHistory:function(t,e){this.viewedName=e,this.sessionId=t,this.showSessionDetail=!0}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticClass:"flex flex-col"},t._l(t.groups,(function(e){return s("div",{staticClass:"bg-blue-100 p-2 rounded my-2"},[s("h3",{staticClass:"text-xl text-gray-900 mb-2 font-semibold"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.processedGroups,(function(o,n){return s("div",[s("h4",{staticClass:"text-gray-700 font-semibold text-lg"},[t._v("\n                        "+t._s(t.formatDate(n))+"\n                    ")]),t._v(" "),s("div",{staticClass:"flex flex-col lg:flex-row lg:justify-between lg:-mx-2 lg:flex-wrap"},t._l(o,(function(o){return s("div",{staticClass:"p-2 lg:w-1/2"},[s("div",{staticClass:"bg-gray-100 rounded p-2 flex justify-between"},[s("div",{staticClass:"flex flex-col mb-2"},[s("strong",{staticClass:"font-semibold"},[t._v("Time")]),t._v("\n                                    "+t._s(o.session.human_start_time)+" - "+t._s(o.session.human_end_time)+"\n                                ")]),t._v(" "),s("div",{staticClass:"flex flex-col mb-2 text-right"},[s("strong",{staticClass:"font-semibold"},[t._v("Bookings")]),t._v(" "),s("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"View List",expression:"'View List'"}],staticClass:"font-semibold text-blue-500 hover:underline cursor-pointer",on:{click:function(s){return t.viewBookings(o,e.name)}}},[t._v("\n                                        "+t._s(o.bookings_count)+"/"+t._s(o.session.capacity)+"\n                                    ")])])])])})),0)])})),t._v(" "),s("h4",{staticClass:"text-gray-700 font-semibold text-lg mt-4"},[t._v("View Session History")]),t._v(" "),s("ul",{staticClass:"my-2"},t._l(e.sessions,(function(o){return s("li",{staticClass:"cursor-pointer hover:underline font-semibold",on:{click:function(s){return t.viewSessionHistory(o.id,e.name)}}},[t._v("\n                        "+t._s(o.day.day)+"'s, "+t._s(o.human_start_time)+"\n                    ")])})),0)],2)})),0)]),t._v(" "),t.showMemberModal?s("portal",{attrs:{to:"modal"}},[s("modal",{attrs:{title:"Member List",id:"member-list"}},[s("div",{staticClass:"w-full bg-gray-100 p-2"},[s("p",{staticClass:"font-semibold text-lg"},[t._v("\n                    Member List for "+t._s(t.viewedName)+", "+t._s(t.formatDate(t.viewedSession.date))+" - "+t._s(t.viewedSession.session.human_start_time)+"\n                ")]),t._v(" "),s("p",[s("a",{attrs:{href:"/admin/api/external/groups/printBookings/"+t.viewedSession.id,target:"_blank"}},[t._v("Printer\n                        Friendly List")])]),t._v(" "),s("groups-member-list",{attrs:{"group-session-id":t.viewedSession.id}})],1)])],1):t._e(),t._v(" "),t.showSessionDetail?s("portal",{attrs:{to:"modal"}},[s("modal",{attrs:{title:"Session History",id:"session-history"}},[s("div",{staticClass:"w-full bg-gray-100 p-2"},[s("div",{staticClass:"absolute top-0 right-0 p-1 leading-none text-xl cursor-pointer",on:{click:function(e){t.showSessionDetail=!1}}},[s("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1),t._v(" "),s("session-history",{attrs:{"group-name":t.viewedName,"session-id":t.sessionId}})],1)])],1):t._e()],1)}),[],!1,null,null,null).exports,r=o({props:{groupSessionId:{type:Number,required:!0}},data:function(){return{bookings:[]}},mounted:function(){var t=this;Architect.request().get("/external/groups/bookings/".concat(this.groupSessionId)).then((function(e){t.bookings=e.data}))}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"my-2 w-full bg-white overflow-hidden rounded-b-lg"},[t._m(0),t._v(" "),t._l(t.bookings,(function(e){return s("tr",{staticClass:"p-1 border-t border-blue-400"},[s("td",{staticClass:"capitalize p-1 border-r border-blue-400"},[t._v("\n            "+t._s(e.member.name)+"\n        ")]),t._v(" "),s("td",{staticClass:"p-1 border-r border-blue-200"},[t._v(t._s(e.member.email))]),t._v(" "),s("td",{staticClass:"p-1"},[t._v(t._s(e.member.phone))])])}))],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"p-1 font-semibold text-blue-700 bg-blue-200"},[e("th",{staticClass:"text-left p-1 border-r border-blue-400"},[this._v("Name")]),this._v(" "),e("th",{staticClass:"text-left p-1 border-r border-blue-400"},[this._v("Email Address")]),this._v(" "),e("th",{staticClass:"text-left p-1"},[this._v("Phone Number")])])}],!1,null,null,null).exports;Architect.onBoot((function(t){t.component("groups-card",i),t.component("groups-member-list",r),t.component("group-session-history",n)}))},function(t,e){}]);